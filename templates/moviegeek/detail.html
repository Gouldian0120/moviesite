{% extends "moviegeek/base.html" %}
{% block content %}
<script>

        function getinfo(movieid) {
            url = 'https://api.themoviedb.org/3/find/tt' + movieid + '?external_source=imdb_id&api_key={{ api_key }}'

            $.getJSON(url,
                      function(result) {
                        title_div = document.getElementById('title')
                        title_div.innerHTML = '<strong>' + result.movie_results[0].title + '</strong>'


                        image_url = 'http://image.tmdb.org/t/p/w500/'
                            + result.movie_results[0].poster_path

                        img_tag = document.getElementById('poster').setAttribute('src', image_url)

                        document.getElementById('overview').innerHTML = result.movie_results[0].overview
                        document.getElementById('release_date').innerHTML =  result.movie_results[0].release_date
                        document.getElementById('lan').innerHTML =  result.movie_results[0].original_language
                        document.getElementById('avg_rating').innerHTML =  result.movie_results[0].rating

                } )}

        $(document).ready(function() {
            getinfo('{{ movie_id }}')
        })
</script>

<div class="container">
    <div class="row">
        <div class="col-sm-8">
            <div id="img" class="col-sm-6">
                <img id="poster" class="img-responsive" src="" alt="movie poster"/>
            </div>
            <div class="col-sm-6">
                <div><strong>Title</strong><p id="title"></p></div>
                <div><strong>Released:</strong><p id="release_date"></p></div>
                <div><strong>Description:</strong><p id="overview"></p></div>
                <div><strong>Language</strong><p id="lan"></p></div>
                <div><strong>Average rating</strong><p id="avg_rating"></p></div>

            </div>
        </div>
    </div>
</div>
{% endblock content %}